#!/bin/sh

# Script to connect to existing IRC channels using lchat-connect
# Usage: lc <channel-name>

[ $# -eq 1 ] || { echo "Usage: $0 <channel-name>"; exit 1; }

irc_dir="$HOME/scr/irc"
[ -d "$irc_dir" ] || { echo "Error: IRC directory $irc_dir not found"; exit 1; }

# Find server containing the channel
for server_dir in "$irc_dir"/irc.*; do
    [ -d "$server_dir/#$1" ] && exec lchat-connect "$irc_dir" "${server_dir##*/}" "#$1"
done

echo "Error: Channel #$1 not found"; exit 1
